"use strict";!function(){var e=(angular.module("sg-utils-iso3166",[]),angular.module("sg-utils-iso4217",[]),angular.module("sg-utils-ubigeo",[])),i=(angular.module("sg-utils-persona",[]),angular.module("sg-utils-organizacion",[]),angular.module("sg-utils-cooperativa",[]),angular.module("sg-utils-producto",[]),angular.module("sg-utils",["sg-utils-iso3166","sg-utils-iso4217","sg-utils-ubigeo","sg-utils-persona","sg-utils-organizacion","sg-utils-cooperativa","sg-utils-producto"]));i.filter("si_no",function(){return function(e,i){var t=["Si","No"],o=["Activo","Inactivo"],n=["Abierto","Cerrado"],a=["Descongelado","Congelado"],s=t;return i&&(s="si"==i.toLowerCase()?t:"activo"==i.toLowerCase()?o:"abierto"==i.toLowerCase()?n:"congelado"==i.toLowerCase()?a:t),e?s[0]:s[1]}}),i.directive("sgMaxDate",function(){return{require:"ngModel",link:function(e,i,t,o){o.$validators.sgmaxdate=function(i,t){var o=i||t;return e.maxDate>=o}}}}),i.service("SGDialog",["$modal",function(e){var i={},t=function(i,t,o){var n=function(e,i,t,o,n){e.title=t,e.message=o,e.btns=n,e.ok=function(){i.close()},e.cancel=function(){i.dismiss("cancel")}};return n.$inject=["$scope","$modalInstance","title","message","btns"],e.open({template:'<div class="modal-header">\n<button type="button" class="close" ng-click="cancel()">\n<span class="pficon pficon-close"></span>\n</button>\n<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">{{message}}</div>\n<div class="modal-footer">\n<button type="button" data-ng-class="btns.cancel.cssClass" ng-click="cancel()">{{btns.cancel.label}}</button>\n<button type="button" data-ng-class="btns.ok.cssClass" ng-click="ok()">{{btns.ok.label}}</button>\n</div>\n',controller:n,resolve:{title:function(){return i},message:function(){return t},btns:function(){return o}}}).result},o=function(e){var i=document.createElement("div");return i.appendChild(document.createTextNode(e)),i.innerHTML};return i.confirmDelete=function(e,i,n){var a="Eliminar "+o(i.charAt(0).toUpperCase()+i.slice(1)),s="¿Estas seguro de querer eliminar permanentemente el/la "+i+" "+e+"?",l={ok:{label:"Eliminar",cssClass:"btn btn-danger"},cancel:{label:"Cancelar",cssClass:"btn btn-default"}};t(a,s,l).then(n)},i.confirmGenerateKeys=function(e,i,o){var n="Generate new keys for realm",a="Are you sure you want to permanently generate new keys for "+e+"?",s={ok:{label:"Generate Keys",cssClass:"btn btn-danger"},cancel:{label:"Cancel",cssClass:"btn btn-default"}};t(n,a,s).then(o)},i.confirm=function(e,i,o,n){var a={ok:{label:e,cssClass:"btn btn-danger"},cancel:{label:"Cancel",cssClass:"btn btn-default"}};t(e,i,a).then(o,n)},i}]),e.directive("sgUbigeo",["SGUbigeo",function(e){return{restrict:"E",replace:!1,require:["^form","ngModel"],link:function(i,t,o,n){n[1].$validators.sgubigeo=function(e,t){var o=e||t;return o=o?o:"",i.requerido?6==o.length:6==o.length||0==o.length},e.$search().then(function(e){i.departamentos=e,i.activeListener()}),i.provincias=void 0,i.distritos=void 0,i.ubigeo={departamento:void 0,provincia:void 0,distrito:void 0},i.$watch("ubigeo.departamento",function(){!angular.isUndefined(i.ubigeo.departamento)&&i.ubigeo.departamento?(i.provincias=i.ubigeo.departamento.$getProvincias().$object,n[0].$setDirty()):(i.ubigeo.provincia=void 0,i.ubigeo.distrito=void 0,i.provincias=void 0,i.distritos=void 0)}),i.$watch("ubigeo.provincia",function(){!angular.isUndefined(i.ubigeo.provincia)&&i.ubigeo.provincia?i.distritos=e.$getDistritos(i.ubigeo.departamento.ubigeoDepartamento,i.ubigeo.provincia.ubigeoProvincia).$object:(i.ubigeo.distrito=void 0,i.distritos=void 0)}),i.$watch("ubigeo.distrito",function(){if(!angular.isUndefined(i.ubigeo.distrito)&&i.ubigeo.distrito){var e=i.ubigeo.distrito.ubigeo;n[1].$setViewValue(e)}}),i.activeListener=function(){var t=i.$watch(function(){return n[1].$modelValue},function(){if(n[1].$modelValue&&6==n[1].$modelValue.length&&angular.isUndefined(i.provincias)&&angular.isUndefined(i.distritos)){for(var o=0;o<i.departamentos.length;o++)if(i.departamentos[o].ubigeoDepartamento==n[1].$modelValue.substring(0,2)){i.ubigeo.departamento=i.departamentos[o];break}i.ubigeo.departamento.$getProvincias().then(function(t){i.provincias=t;for(var o=0;o<i.provincias.length;o++)if(i.provincias[o].ubigeoProvincia==n[1].$modelValue.substring(2,4)){i.ubigeo.provincia=i.provincias[o];break}e.$getDistritos(i.ubigeo.departamento.ubigeoDepartamento,i.ubigeo.provincia.ubigeoProvincia).then(function(e){i.distritos=e;for(var t=0;t<i.distritos.length;t++)if(i.distritos[t].ubigeoDistrito==n[1].$modelValue.substring(4,6)){i.ubigeo.distrito=i.distritos[t];break}})}),t()}else t()})}},scope:{requerido:"@"},template:'<div class="row"><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.departamento.$invalid && (formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted)}"><label>Departamento</label><ui-select name="departamento" ng-model="ubigeo.departamento"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in departamentos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.departamento.$error" ng-if="formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese departamento.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Provincia</label><ui-select name="provincia" ng-model="ubigeo.provincia"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in provincias | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.provincia.$error" ng-if="formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Distrito</label><ui-select name="distrito" ng-model="ubigeo.distrito"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in distritos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.distrito.$error" ng-if="formSgUbigeo.distrito.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div></div>'}}]),angular.module("sgtemplate/modal/modal.html",[]).run(["$templateCache",function(e){e.put("sgtemplate/modal/modal.html",'<div class="modal-header">\n<button type="button" class="close" ng-click="cancel()">\n<span class="pficon pficon-close">×</span>\n</button>\n<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">{{message}}</div>\n<div class="modal-footer">\n<button type="button" data-ng-class="btns.cancel.cssClass" ng-click="cancel()">{{btns.cancel.label}}</button>\n<button type="button" data-ng-class="btns.ok.cssClass" ng-click="ok()">{{btns.ok.label}}</button>\n</div>\n')}])}();
"use strict";!function(){var i=(angular.module("sg-utils-iso3166",[]),angular.module("sg-utils-iso4217",[]),angular.module("sg-utils-ubigeo",[])),e=(angular.module("sg-utils-persona",[]),angular.module("sg-utils-organizacion",[]),angular.module("sg-utils-cooperativa",[]),angular.module("sg-utils-producto",[]),angular.module("sg-utils",["sg-utils-iso3166","sg-utils-iso4217","sg-utils-ubigeo","sg-utils-persona","sg-utils-organizacion","sg-utils-cooperativa","sg-utils-producto"]));e.filter("si_no",function(){return function(i,e){var o=["Si","No"],t=["Activo","Inactivo"],r=["Abierto","Cerrado"],a=["Descongelado","Congelado"],s=o;return e&&(s="si"==e.toLowerCase()?o:"activo"==e.toLowerCase()?t:"abierto"==e.toLowerCase()?r:"congelado"==e.toLowerCase()?a:o),i?s[0]:s[1]}}),e.directive("sgMaxDate",function(){return{require:"ngModel",link:function(i,e,o,t){t.$validators.sgmaxdate=function(e,o){var t=e||o;return i.maxDate>=t}}}}),i.directive("sgUbigeo",["SGUbigeo",function(i){return{restrict:"E",replace:!1,require:["^form","ngModel"],link:function(e,o,t,r){r[1].$validators.sgubigeo=function(i,o){var t=i||o;return t=t?t:"",e.requerido?6==t.length:6==t.length||0==t.length},i.$search().then(function(i){e.departamentos=i,e.activeListener()}),e.provincias=void 0,e.distritos=void 0,e.ubigeo={departamento:void 0,provincia:void 0,distrito:void 0},e.$watch("ubigeo.departamento",function(){!angular.isUndefined(e.ubigeo.departamento)&&e.ubigeo.departamento?(e.provincias=e.ubigeo.departamento.$getProvincias().$object,r[0].$setDirty()):(e.ubigeo.provincia=void 0,e.ubigeo.distrito=void 0,e.provincias=void 0,e.distritos=void 0)}),e.$watch("ubigeo.provincia",function(){!angular.isUndefined(e.ubigeo.provincia)&&e.ubigeo.provincia?e.distritos=i.$getDistritos(e.ubigeo.departamento.ubigeoDepartamento,e.ubigeo.provincia.ubigeoProvincia).$object:(e.ubigeo.distrito=void 0,e.distritos=void 0)}),e.$watch("ubigeo.distrito",function(){if(!angular.isUndefined(e.ubigeo.distrito)&&e.ubigeo.distrito){var i=e.ubigeo.distrito.ubigeo;r[1].$setViewValue(i)}}),e.activeListener=function(){var o=e.$watch(function(){return r[1].$modelValue},function(){if(r[1].$modelValue&&6==r[1].$modelValue.length&&angular.isUndefined(e.provincias)&&angular.isUndefined(e.distritos)){for(var t=0;t<e.departamentos.length;t++)if(e.departamentos[t].ubigeoDepartamento==r[1].$modelValue.substring(0,2)){e.ubigeo.departamento=e.departamentos[t];break}e.ubigeo.departamento.$getProvincias().then(function(o){e.provincias=o;for(var t=0;t<e.provincias.length;t++)if(e.provincias[t].ubigeoProvincia==r[1].$modelValue.substring(2,4)){e.ubigeo.provincia=e.provincias[t];break}i.$getDistritos(e.ubigeo.departamento.ubigeoDepartamento,e.ubigeo.provincia.ubigeoProvincia).then(function(i){e.distritos=i;for(var o=0;o<e.distritos.length;o++)if(e.distritos[o].ubigeoDistrito==r[1].$modelValue.substring(4,6)){e.ubigeo.distrito=e.distritos[o];break}})}),o()}else o()})}},scope:{requerido:"@"},template:'<div class="row"><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.departamento.$invalid && (formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted)}"><label>Departamento</label><ui-select name="departamento" ng-model="ubigeo.departamento"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in departamentos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.departamento.$error" ng-if="formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese departamento.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Provincia</label><ui-select name="provincia" ng-model="ubigeo.provincia"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in provincias | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.provincia.$error" ng-if="formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Distrito</label><ui-select name="distrito" ng-model="ubigeo.distrito"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in distritos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.distrito.$error" ng-if="formSgUbigeo.distrito.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div></div>'}}])}();
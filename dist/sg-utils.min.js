"use strict";!function(){var i=(angular.module("sg-utils-iso3166",[]),angular.module("sg-utils-iso4217",[]),angular.module("sg-utils-ubigeo",[])),e=(angular.module("sg-utils-persona",[]),angular.module("sg-utils-organizacion",[]),angular.module("sg-utils-cooperativa",[]),angular.module("sg-utils-producto",[]),angular.module("sg-utils",["sg-utils-iso3166","sg-utils-iso4217","sg-utils-ubigeo","sg-utils-persona","sg-utils-organizacion","sg-utils-cooperativa","sg-utils-producto"]));e.filter("si_no",function(){return function(i,e){var o=["Si","No"],t=["Activo","Inactivo"],s=["Abierto","Cerrado"],r=["Descongelado","Congelado"],a=o;return e&&(a="si"==e.toLowerCase()?o:"activo"==e.toLowerCase()?t:"abierto"==e.toLowerCase()?s:"congelado"==e.toLowerCase()?r:o),i?a[0]:a[1]}}),i.directive("sgUbigeo",["SGDepartamento","SGProvincia","SGDistrito",function(i,e,o){return{restrict:"E",replace:!1,require:["^form","ngModel"],link:function(o,t,s,r){r[1].$validators.sgubigeo=function(i,e){var t=i||e;return t=t?t:"",o.requerido?6==t.length:6==t.length||0==t.length},i.$search().then(function(i){o.departamentos=i,o.activeListener()}),o.provincias=void 0,o.distritos=void 0,o.ubigeo={departamento:void 0,provincia:void 0,distrito:void 0},o.$watch("ubigeo.departamento",function(){!angular.isUndefined(o.ubigeo.departamento)&&o.ubigeo.departamento?(o.provincias=o.ubigeo.departamento.$getProvincias().$object,r[1].$setDirty()):(o.ubigeo.provincia=void 0,o.ubigeo.distrito=void 0,o.provincias=void 0,o.distritos=void 0)}),o.$watch("ubigeo.provincia",function(){!angular.isUndefined(o.ubigeo.provincia)&&o.ubigeo.provincia?o.distritos=e.$getDistritos(o.ubigeo.departamento.codigo,o.ubigeo.provincia.codigo).$object:(o.ubigeo.distrito=void 0,o.distritos=void 0)}),o.$watch("ubigeo.distrito",function(){if(!angular.isUndefined(o.ubigeo.distrito)&&o.ubigeo.distrito){var i=o.ubigeo.departamento.codigo+o.ubigeo.provincia.codigo+o.ubigeo.distrito.codigo;r[1].$setViewValue(i)}}),o.activeListener=function(){var i=o.$watch(function(){return r[1].$modelValue},function(){if(r[1].$modelValue&&6==r[1].$modelValue.length&&angular.isUndefined(o.provincias)&&angular.isUndefined(o.distritos)){for(var t=0;t<o.departamentos.length;t++)if(o.departamentos[t].codigo==r[1].$modelValue.substring(0,2)){o.ubigeo.departamento=o.departamentos[t];break}o.ubigeo.departamento.$getProvincias().then(function(i){o.provincias=i;for(var t=0;t<o.provincias.length;t++)if(o.provincias[t].codigo==r[1].$modelValue.substring(2,4)){o.ubigeo.provincia=o.provincias[t];break}e.distritos(o.ubigeo.departamento.codigo,o.ubigeo.provincia.codigo).then(function(i){o.distritos=i;for(var e=0;e<o.distritos.length;e++)if(o.distritos[e].codigo==r[1].$modelValue.substring(4,6)){o.ubigeo.distrito=o.distritos[e];break}})}),i()}else i()})}},scope:{requerido:"@"},template:'<div class="row"><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.departamento.$invalid && (formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted)}"><label>Departamento</label><ui-select name="departamento" ng-model="ubigeo.departamento"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in departamentos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.departamento.$error" ng-if="formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese departamento.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Provincia</label><ui-select name="provincia" ng-model="ubigeo.provincia"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in provincias | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.provincia.$error" ng-if="formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Distrito</label><ui-select name="distrito" ng-model="ubigeo.distrito"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in distritos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.distrito.$error" ng-if="formSgUbigeo.distrito.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div></div>'}}])}();
"use strict";!function(){var e=(angular.module("sg-utils-iso3166",[]),angular.module("sg-utils-iso4217",[]),angular.module("sg-utils-ubigeo",[])),i=(angular.module("sg-utils-persona",[]),angular.module("sg-utils-organizacion",[]),angular.module("sg-utils-cooperativa",[]),angular.module("sg-utils-producto",[]),angular.module("sg-utils-rrhh",[])),t=angular.module("sg-utils",["sg-utils-iso3166","sg-utils-iso4217","sg-utils-ubigeo","sg-utils-persona","sg-utils-organizacion","sg-utils-cooperativa","sg-utils-producto","sg-utils-rrhh"]);t.filter("si_no",function(){return function(e,i){var t=["Si","No"],n=["Activo","Inactivo"],o=["Abierto","Cerrado"],s=["Descongelado","Congelado"],a=t;return i&&(a="si"==i.toLowerCase()?t:"activo"==i.toLowerCase()?n:"abierto"==i.toLowerCase()?o:"congelado"==i.toLowerCase()?s:t),e?a[0]:a[1]}}),t.directive("sgMaxDate",function(){return{require:"ngModel",link:function(e,i,t,n){n.$validators.sgmaxdate=function(i,t){var n=i||t;return e.maxDate>=n}}}}),t.service("SGDialog",["$modal",function(e){var i={},t=function(i,t,n){var o=function(e,i,t,n,o){e.title=t,e.message=n,e.btns=o,e.ok=function(){i.close()},e.cancel=function(){i.dismiss("cancel")}};return o.$inject=["$scope","$modalInstance","title","message","btns"],e.open({template:'<div class="modal-header">\n<button type="button" class="close" ng-click="cancel()">\n<span class="pficon pficon-close"></span>\n</button>\n<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">{{message}}</div>\n<div class="modal-footer">\n<button type="button" data-ng-class="btns.cancel.cssClass" ng-click="cancel()">{{btns.cancel.label}}</button>\n<button type="button" data-ng-class="btns.ok.cssClass" ng-click="ok()">{{btns.ok.label}}</button>\n</div>\n',controller:o,resolve:{title:function(){return i},message:function(){return t},btns:function(){return n}}}).result},n=function(e){var i=document.createElement("div");return i.appendChild(document.createTextNode(e)),i.innerHTML};return i.confirmDelete=function(e,i,o){var s="Eliminar "+n(i.charAt(0).toUpperCase()+i.slice(1)),a="�Estas seguro de querer eliminar permanentemente el/la "+i+" "+e+"?",r={ok:{label:"Eliminar",cssClass:"btn btn-danger"},cancel:{label:"Cancelar",cssClass:"btn btn-default"}};t(s,a,r).then(o)},i.confirmGenerateKeys=function(e,i,n){var o="Generate new keys for realm",s="Are you sure you want to permanently generate new keys for "+e+"?",a={ok:{label:"Generate Keys",cssClass:"btn btn-danger"},cancel:{label:"Cancel",cssClass:"btn btn-default"}};t(o,s,a).then(n)},i.confirm=function(e,i,n,o){var s={ok:{label:e,cssClass:"btn btn-danger"},cancel:{label:"Cancel",cssClass:"btn btn-default"}};t(e,i,s).then(n,o)},i}]),e.directive("sgUbigeo",["SGUbigeo",function(e){return{restrict:"E",replace:!1,require:["^form","ngModel"],link:function(i,t,n,o){o[1].$validators.sgubigeo=function(e,t){var n=e||t;return n=n?n:"",i.requerido?6==n.length:6==n.length||0==n.length},e.$search().then(function(e){i.departamentos=e,i.activeListener()}),i.provincias=void 0,i.distritos=void 0,i.ubigeo={departamento:void 0,provincia:void 0,distrito:void 0},i.$watch("ubigeo.departamento",function(){!angular.isUndefined(i.ubigeo.departamento)&&i.ubigeo.departamento?(i.provincias=i.ubigeo.departamento.$getProvincias().$object,o[0].$setDirty()):(i.ubigeo.provincia=void 0,i.ubigeo.distrito=void 0,i.provincias=void 0,i.distritos=void 0)}),i.$watch("ubigeo.provincia",function(){!angular.isUndefined(i.ubigeo.provincia)&&i.ubigeo.provincia?i.distritos=e.$getDistritos(i.ubigeo.departamento.ubigeoDepartamento,i.ubigeo.provincia.ubigeoProvincia).$object:(i.ubigeo.distrito=void 0,i.distritos=void 0)}),i.$watch("ubigeo.distrito",function(){if(!angular.isUndefined(i.ubigeo.distrito)&&i.ubigeo.distrito){var e=i.ubigeo.distrito.ubigeo;o[1].$setViewValue(e)}}),i.activeListener=function(){var t=i.$watch(function(){return o[1].$modelValue},function(){if(o[1].$modelValue&&6==o[1].$modelValue.length&&angular.isUndefined(i.provincias)&&angular.isUndefined(i.distritos)){for(var n=0;n<i.departamentos.length;n++)if(i.departamentos[n].ubigeoDepartamento==o[1].$modelValue.substring(0,2)){i.ubigeo.departamento=i.departamentos[n];break}i.ubigeo.departamento.$getProvincias().then(function(t){i.provincias=t;for(var n=0;n<i.provincias.length;n++)if(i.provincias[n].ubigeoProvincia==o[1].$modelValue.substring(2,4)){i.ubigeo.provincia=i.provincias[n];break}e.$getDistritos(i.ubigeo.departamento.ubigeoDepartamento,i.ubigeo.provincia.ubigeoProvincia).then(function(e){i.distritos=e;for(var t=0;t<i.distritos.length;t++)if(i.distritos[t].ubigeoDistrito==o[1].$modelValue.substring(4,6)){i.ubigeo.distrito=i.distritos[t];break}})}),t()}else t()})}},scope:{requerido:"@"},template:'<div class="row"><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.departamento.$invalid && (formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted)}"><label>Departamento</label><ui-select name="departamento" ng-model="ubigeo.departamento"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in departamentos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.departamento.$error" ng-if="formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese departamento.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Provincia</label><ui-select name="provincia" ng-model="ubigeo.provincia"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in provincias | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.provincia.$error" ng-if="formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Distrito</label><ui-select name="distrito" ng-model="ubigeo.distrito"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in distritos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.distrito.$error" ng-if="formSgUbigeo.distrito.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div></div>'}}]),i.directive("sgAbreviaturaSucursalValidate",["$q","SGSucursal",function(e,i){return{restrict:"AE",require:"ngModel",scope:{sgExclude:"=sgExclude"},link:function(t,n,o,s){t.$eval(o.sgSelfInclude);s.$asyncValidators.disponible=function(n,o){var s=n||o;return i.$findByAbreviatura(s).then(function(i){return i?t.sgExclude&&i.id==t.sgExclude.id?!0:e.reject("Abreviatura de sucursal no disponible"):!0},function(i){return e.reject("Error al buscar sucursal")})}}}}]),i.directive("sgDenominacionSucursalValidate",["$q","SGSucursal",function(e,i){return{restrict:"AE",require:"ngModel",scope:{sgExclude:"=sgExclude"},link:function(t,n,o,s){t.$eval(o.sgSelfInclude);s.$asyncValidators.disponible=function(n,o){var s=n||o;return i.$findByDenominacion(s).then(function(i){return i?t.sgExclude&&i.id==t.sgExclude.id?!0:e.reject("Denominacion de sucursal no disponible"):!0},function(i){return e.reject("Error al buscar sucursal")})}}}}]),angular.module("sgtemplate/modal/modal.html",[]).run(["$templateCache",function(e){e.put("sgtemplate/modal/modal.html",'<div class="modal-header">\n<button type="button" class="close" ng-click="cancel()">\n<span class="pficon pficon-close">�</span>\n</button>\n<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">{{message}}</div>\n<div class="modal-footer">\n<button type="button" data-ng-class="btns.cancel.cssClass" ng-click="cancel()">{{btns.cancel.label}}</button>\n<button type="button" data-ng-class="btns.ok.cssClass" ng-click="ok()">{{btns.ok.label}}</button>\n</div>\n')}])}();
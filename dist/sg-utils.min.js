"use strict";!function(){function e(e,i){var t=i.formLayout;if(t||(t="horizontal"),"basic"===t)return'<div class="row"><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.departamento.$invalid && (formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted)}"><label>Departamento</label><ui-select name="departamento" ng-model="ubigeo.departamento"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in departamentos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.departamento.$error" ng-if="formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese departamento.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Provincia</label><ui-select name="provincia" ng-model="ubigeo.provincia"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in provincias | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.provincia.$error" ng-if="formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div><div class="col-sm-4"><div class="form-group" ng-class="{ \'has-error\' : formSgUbigeo.provincia.$invalid && (formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted)}"><label>Distrito</label><ui-select name="distrito" ng-model="ubigeo.distrito"><ui-select-match placeholder="Seleccione">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in distritos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.distrito.$error" ng-if="formSgUbigeo.distrito.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div></div>';if("inline"===t);else if("horizontal"===t)return'<div class="form-group" ng-class="{ \'has-error\' : (formSgUbigeo.departamento.$invalid || formSgUbigeo.provincia.$invalid || formSgUbigeo.distrito.$invalid) && (formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted)}"><label class="col-sm-2 control-label">Ubigeo:</label><div class="col-sm-3"><ui-select name="departamento" ng-model="ubigeo.departamento"><ui-select-match placeholder="Departamento">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in departamentos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.departamento.$error" ng-if="formSgUbigeo.departamento.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese departamento.</div></div></div><div class="col-sm-3"><ui-select name="provincia" ng-model="ubigeo.provincia"><ui-select-match placeholder="Provincia">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in provincias | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.provincia.$error" ng-if="formSgUbigeo.provincia.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div><div class="col-sm-3"><ui-select name="distrito" ng-model="ubigeo.distrito"><ui-select-match placeholder="Distrito">{{$select.selected.denominacion}}</ui-select-match><ui-select-choices repeat="item in distritos | filter: $select.search"><div ng-bind-html="item.denominacion | highlight: $select.search"></div><small ng-bind-html="item.codigo | highlight: $select.search"></small></ui-select-choices></ui-select><div ng-messages="formSgUbigeo.distrito.$error" ng-if="formSgUbigeo.distrito.$touched || formSgUbigeo.$submitted"><div class="help-block" ng-message="required">Ingrese provincia.</div></div></div></div>'}var i=(angular.module("sg-utils-iso3166",[]),angular.module("sg-utils-iso4217",[]),angular.module("sg-utils-ubigeo",[])),t=(angular.module("sg-utils-persona",[]),angular.module("sg-utils-organizacion",[]),angular.module("sg-utils-cooperativa",[])),n=(angular.module("sg-utils-producto",[]),angular.module("sg-utils-rrhh",[])),o=angular.module("sg-utils",["sg-utils-iso3166","sg-utils-iso4217","sg-utils-ubigeo","sg-utils-persona","sg-utils-organizacion","sg-utils-cooperativa","sg-utils-producto","sg-utils-rrhh"]);o.filter("si_no",function(){return function(e,i){var t=["Si","No"],n=["Activo","Inactivo"],o=["Abierto","Cerrado"],a=["Descongelado","Congelado"],s=t;return i&&(s="si"==i.toLowerCase()?t:"activo"==i.toLowerCase()?n:"abierto"==i.toLowerCase()?o:"congelado"==i.toLowerCase()?a:t),e?s[0]:s[1]}}),o.directive("sgMaxDate",function(){return{require:"ngModel",link:function(e,i,t,n){n.$validators.sgmaxdate=function(i,t){var n=i||t;return e.maxDate>=n}}}}),o.service("SGDialog",["$modal",function(e){var i={},t=function(i,t,n){var o=function(e,i,t,n,o){e.title=t,e.message=n,e.btns=o,e.ok=function(){i.close()},e.cancel=function(){i.dismiss("cancel")}};return o.$inject=["$scope","$modalInstance","title","message","btns"],e.open({template:'<div class="modal-header">\n<button type="button" class="close" ng-click="cancel()">\n<span class="pficon pficon-close"></span>\n</button>\n<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">{{message}}</div>\n<div class="modal-footer">\n<button type="button" data-ng-class="btns.cancel.cssClass" ng-click="cancel()">{{btns.cancel.label}}</button>\n<button type="button" data-ng-class="btns.ok.cssClass" ng-click="ok()">{{btns.ok.label}}</button>\n</div>\n',controller:o,resolve:{title:function(){return i},message:function(){return t},btns:function(){return n}}}).result},n=function(e){var i=document.createElement("div");return i.appendChild(document.createTextNode(e)),i.innerHTML};return i.confirmDelete=function(e,i,o){var a="Eliminar "+n(i.charAt(0).toUpperCase()+i.slice(1)),s="�Estas seguro de querer eliminar permanentemente el/la "+i+" "+e+"?",r={ok:{label:"Eliminar",cssClass:"btn btn-danger"},cancel:{label:"Cancelar",cssClass:"btn btn-default"}};t(a,s,r).then(o)},i.confirmGenerateKeys=function(e,i,n){var o="Generate new keys for realm",a="Are you sure you want to permanently generate new keys for "+e+"?",s={ok:{label:"Generate Keys",cssClass:"btn btn-danger"},cancel:{label:"Cancel",cssClass:"btn btn-default"}};t(o,a,s).then(n)},i.confirm=function(e,i,n,o){var a={ok:{label:e,cssClass:"btn btn-danger"},cancel:{label:"Cancel",cssClass:"btn btn-default"}};t(e,i,a).then(n,o)},i}]),o.directive("sgReadOnly",function(){var e={},i={replace:!1,link:function(i,t,n){var o=function(i,t){t.disabled||(e[t.tagName+i]=!0,t.disabled=!0)},a=function(i,t){e[t.tagName+i]&&(t.disabled=!1,delete e[i])};i.$watch(n.sgReadOnly,function(e){e?(t.find("input").each(o),t.find("button").each(o),t.find("select").each(o),t.find("textarea").each(o)):(t.find("input").each(a),t.find("input").each(a),t.find("button").each(a),t.find("select").each(a),t.find("textarea").each(a))})}};return i}),o.directive("sgInput",function(){var e={scope:!0,replace:!1,link:function(e,i,t){var n=i.children("form"),o=i.children("label"),a=i.children("input"),s=n.attr("name")+"."+a.attr("name");i.attr("class","control-group"),o.attr("class","control-label"),o.attr("for",s),a.wrap('<div class="controls"/>'),a.attr("id",s),a.attr("placeHolder")||a.attr("placeHolder",o.text()),a.attr("required")&&o.append(' <span class="required">*</span>')}};return e}),o.directive("sgEnter",function(){return function(e,i,t){i.bind("keydown keypress",function(i){13===i.which&&(e.$apply(function(){e.$eval(t.sgEnter)}),i.preventDefault())})}}),o.directive("sgSave",["$compile",function(e){return{restrict:"A",link:function(e,i,t,n){i.addClass("btn btn-primary"),i.attr('type","submit'),i.bind("click",function(){e.$apply(function(){var t=i.closest("form");if(t&&t.attr("name")){var n=t.find(".ng-valid");if(e[t.attr("name")].$valid)n.parent().removeClass("has-error"),e.save();else{console.log("Missing or invalid field(s). Please verify the fields in red."),n.parent().removeClass("has-error");var o=t.find(".ng-invalid");o.parent().addClass("has-error")}}})})}}}]),o.directive("sgReset",["$compile",function(e){return{restrict:"A",link:function(e,i,t,n){i.addClass("btn btn-default"),i.attr("type","submit"),i.bind("click",function(){e.$apply(function(){var t=i.closest("form");t&&t.attr("name")&&(t.find(".ng-valid").removeClass("error"),t.find(".ng-invalid").removeClass("error"),e.reset())})})}}}]),o.directive("sgCancel",["$compile",function(e){return{restrict:"A",link:function(e,i,t,n){i.addClass("btn btn-default"),i.attr("type","submit")}}}]),o.directive("sgDelete",["$compile",function(e){return{restrict:"A",link:function(e,i,t,n){i.addClass("btn btn-danger"),i.attr("type","submit")}}}]),o.filter("remove",function(){return function(e,i,t){if(!e||!i)return e;for(var n=[],o=0;o<e.length;o++){var a=e[o];if(Array.isArray(i)){for(var s=0;s<i.length;s++)if(t){if(i[s][t]==a[t]){a=null;break}}else if(i[s]==a){a=null;break}}else t?i[t]==a[t]&&(a=null):i==a&&(a=null);null!=a&&n.push(a)}return n}}),o.filter("capitalize",function(){return function(e){if(e){for(var i=e.substring(0,1).toUpperCase(),t=e.substring(1),n=0;n<t.length;n++){var o=t[n];o.match(/[A-Z]/)&&(i=i.concat(" ")),i=i.concat(o)}return i}}}),i.directive("sgUbigeo",["SGUbigeo",function(i){return{restrict:"E",replace:!1,require:["^form","ngModel"],link:function(e,t,n,o){o[1].$validators.sgubigeo=function(i,t){var n=i||t;return n=n?n:"",e.requerido?6==n.length:6==n.length||0==n.length},i.$search().then(function(i){e.departamentos=i.items,e.activeListener()}),e.provincias=void 0,e.distritos=void 0,e.ubigeo={departamento:void 0,provincia:void 0,distrito:void 0},e.$watch("ubigeo.departamento",function(){!angular.isUndefined(e.ubigeo.departamento)&&e.ubigeo.departamento?(i.$search({ubigeo:e.ubigeo.departamento.ubigeo.substring(0,2)}).then(function(i){e.provincias=i.items}),o[0].$setDirty()):(e.ubigeo.provincia=void 0,e.ubigeo.distrito=void 0,e.provincias=void 0,e.distritos=void 0)}),e.$watch("ubigeo.provincia",function(){!angular.isUndefined(e.ubigeo.provincia)&&e.ubigeo.provincia?i.$search({ubigeo:e.ubigeo.provincia.ubigeo.substring(0,4)}).then(function(i){e.distritos=i.items}):(e.ubigeo.distrito=void 0,e.distritos=void 0)}),e.$watch("ubigeo.distrito",function(){if(!angular.isUndefined(e.ubigeo.distrito)&&e.ubigeo.distrito){var i=e.ubigeo.distrito.ubigeo;o[1].$setViewValue(i)}}),e.activeListener=function(){var t=e.$watch(function(){return o[1].$modelValue},function(){if(o[1].$modelValue&&6==o[1].$modelValue.length&&angular.isUndefined(e.provincias)&&angular.isUndefined(e.distritos)){for(var n=0;n<e.departamentos.length;n++)if(e.departamentos[n].ubigeoDepartamento==o[1].$modelValue.substring(0,2)){e.ubigeo.departamento=e.departamentos[n];break}i.$search({ubigeo:e.ubigeo.departamento.ubigeo.substring(0,2)}).then(function(t){e.provincias=t.items;for(var n=0;n<e.provincias.length;n++)if(e.provincias[n].ubigeoProvincia==o[1].$modelValue.substring(2,4)){e.ubigeo.provincia=e.provincias[n];break}i.$search({ubigeo:e.ubigeo.provincia.ubigeo.substring(0,4)}).then(function(i){e.distritos=i.items;for(var t=0;t<e.distritos.length;t++)if(e.distritos[t].ubigeoDistrito==o[1].$modelValue.substring(4,6)){e.ubigeo.distrito=e.distritos[t];break}})}),t()}else t()})}},scope:{requerido:"@",formLayout:"@"},template:e}}]),t.directive("sgMonedaBovedaAgenciaValidate",["$q","SGAgencia","SGBoveda",function(e,i,t){return{restrict:"A",require:"ngModel",link:function(e,n,o,a){e.agencia,o.$observe("sgAgencia",function(i){e.agencia=e.$eval(i)}),a.$validators.disponible=function(n,o){var s=n||o,r=void 0;return e.agencia&&(r=i.$new(e.agencia.id).$getUrl(),t.$search({agencia:r}).then(function(e){for(var i=!0,t=0;t<e.length;t++)e[t].moneda==s.alphabeticCode&&(i=!1);a.$setValidity("disponible",i)},function(){a.$setValidity("disponible",!1)})),!0}}}}]),n.directive("sgDenominacionSucursalValidate",["$q","SGSucursal",function(e,i){return{restrict:"AE",require:"ngModel",scope:{sgExclude:"=sgExclude"},link:function(t,n,o,a){t.$eval(o.sgSelfInclude);a.$asyncValidators.disponible=function(n,o){var a=n||o;return i.$find(a).then(function(i){return angular.isDefined(i)?t.sgExclude&&i.id==t.sgExclude.id?!0:e.reject("Denominacion de sucursal no disponible"):!0},function(i){return e.reject("Error al buscar sucursal")})}}}}]),n.directive("sgCodigoAgenciaValidate",["$q","SGAgencia",function(e,i){return{restrict:"AE",require:"ngModel",link:function(t,n,o,a){a.$asyncValidators.disponible=function(t,n){var o=t||n;return i.$findByCodigo(o).then(function(i){return i?e.reject("Codigo de agencia no disponible"):!0},function(i){return e.reject("Error")})}}}}]),angular.module("sgtemplate/modal/modal.html",[]).run(["$templateCache",function(e){e.put("sgtemplate/modal/modal.html",'<div class="modal-header">\n<button type="button" class="close" ng-click="cancel()">\n<span class="pficon pficon-close">�</span>\n</button>\n<h4 class="modal-title">{{title}}</h4>\n</div>\n<div class="modal-body">{{message}}</div>\n<div class="modal-footer">\n<button type="button" data-ng-class="btns.cancel.cssClass" ng-click="cancel()">{{btns.cancel.label}}</button>\n<button type="button" data-ng-class="btns.ok.cssClass" ng-click="ok()">{{btns.ok.label}}</button>\n</div>\n')}])}();